{% assign description = guide.summary | default: guide.excerpt | strip_html %}
{% assign tag_list = "" %}
{% if guide.tags %}
  {% assign tag_list = guide.tags | join: "|" %}
{% endif %}
{% assign tag_text = "" %}
{% if guide.tags %}
  {% assign tag_text = guide.tags | join: " " %}
{% endif %}
{% assign search_text = guide.title | append: " " | append: description | append: " " | append: tag_text | strip | strip_newlines %}
{% capture data_attrs %}data-filter-card data-search="{{ search_text | escape }}" data-tags="{{ tag_list | escape }}"{% endcapture %}
{% assign status_label = "公開中" %}
{% assign status_class = "is-published" %}
{% if guide.status == "wip" %}
  {% assign status_label = "準備中" %}
  {% assign status_class = "is-wip" %}
{% endif %}
{% capture meta %}
  {% if guide.minutes %}実務 {{ guide.minutes }}分{% endif %}
  {% if guide.minutes and guide.updated %} / {% endif %}
  {% if guide.updated %}更新: {{ guide.updated }}{% endif %}
{% endcapture %}
{% assign meta = meta | strip %}
{% assign link_url = nil %}
{% if guide.status != "wip" %}
  {% assign link_url = guide.url %}
{% endif %}
{% include list-card.html
  class="guide-card"
  data_attrs=data_attrs
  title=guide.title
  description=description
  status=status_label
  status_class=status_class
  tags=guide.tags
  meta=meta
  link_url=link_url
  link_label="記事を読む →"
  tag_link_base="/guides/?tag="
%}
